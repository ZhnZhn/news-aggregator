{"version":3,"sources":["../../../src/components/panes/NewsPane.jsx"],"names":["CHILD_MARGIN","RESIZE_INIT_WIDTH","RESIZE_MIN_WIDTH","RESIZE_MAX_WIDTH","RESIZE_DELTA","CL","NEWS_PANE","SHOW_POPUP","MENU_MORE","S","BT_REMOVE","position","top","marginLeft","marginRight","SCROLL_DIV","overflowY","height","paddingRight","INLINE_BLOCK","display","NONE","_getWidth","style","parseInt","width","_toStyleWidth","_focusFirstItem","ref","setTimeout","current","focus","_crPaneCaption","args","filter","Boolean","join","NewsPane","props","_onStore","actionType","option","addAction","showAction","toggleAction","id","setState","isShow","articles","data","sortBy","state","prevState","_showMore","isMore","_hToggleMore","_getRootNodeStyle","rootDiv","_resizeTo","_plusToWidth","w","_minusToWidth","_hHide","onClose","_refRootDiv","node","_getRootDiv","_refFirstItem","childMargin","_widthStyle","has","initWidthStyle","_MODEL","onMinWidth","bind","onInitWidth","onPlusWidth","onMinusWidth","onRemoveItems","componentDidMount","store","unsubscribe","listen","componentWillUnmount","_renderArticles","onCloseItem","onRemoveUnder","Item","map","article","index","articleId","render","paneCaption","theme","TS","createStyle","styleConfig","_paneCaption","_className","_styleIsShow","PANE_ROOT","EL_BORDER","PANE_CAPTION","CL_SCROLL_PANE","Component"],"mappings":";;;;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA,IAAMA,YAAY,GAAG,EAArB;AAAA,IACEC,iBAAiB,GAAG,GADtB;AAAA,IAEEC,gBAAgB,GAAG,GAFrB;AAAA,IAGEC,gBAAgB,GAAG,IAHrB;AAAA,IAIEC,YAAY,GAAG,EAJjB;AAAA,IAKEC,EAAE,GAAG;AACLC,EAAAA,SAAS,EAAE,WADN;AAELC,EAAAA,UAAU,EAAE,YAFP;AAGLC,EAAAA,SAAS,EAAE;AAHN,CALP;AAWA,IAAMC,CAAC,GAAG;AACRC,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE,UADD;AAETC,IAAAA,GAAG,EAAE,CAAC,CAFG;AAGTC,IAAAA,UAAU,EAAE,EAHH;AAITC,IAAAA,WAAW,EAAE;AAJJ,GADH;AAORC,EAAAA,UAAU,EAAG;AACXC,IAAAA,SAAS,EAAE,MADA;AAEXC,IAAAA,MAAM,EAAE,KAFG;AAGXC,IAAAA,YAAY,EAAE;AAHH,GAPL;AAYRC,EAAAA,YAAY,EAAG;AACbC,IAAAA,OAAO,EAAG;AADG,GAZP;AAeRC,EAAAA,IAAI,EAAG;AACLD,IAAAA,OAAO,EAAE;AADJ;AAfC,CAAV;;AAoBA,IAAME,SAAS,GAAG,SAAZA,SAAY,CAAAC,KAAK;AAAA,SAAIC,QAAQ,CAACD,KAAK,CAACE,KAAP,EAAc,EAAd,CAAR,IACtBxB,iBADkB;AAAA,CAAvB;;AAEA,IAAMyB,aAAa,GAAG,SAAhBA,aAAgB,CAAAD,KAAK;AAAA,SAAIA,KAAK,GAAG,IAAZ;AAAA,CAA3B;;AAEA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,GAAG,EAAI;AAC7BC,EAAAA,UAAU,CAAE,YAAM;AAChB,QAAID,GAAG,IAAIA,GAAG,CAACE,OAAX,IAAsBF,GAAG,CAACE,OAAJ,CAAYC,KAAtC,EAA6C;AAC3CH,MAAAA,GAAG,CAACE,OAAJ,CAAYC,KAAZ;AACD;AACF,GAJS,EAIP,IAJO,CAAV;AAKD,CAND;;AAQA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,oCAAIC,IAAJ;AAAIA,IAAAA,IAAJ;AAAA;;AAAA,SAAaA,IAAI,CACrCC,MADiC,CAC1BC,OAD0B,EAEjCC,IAFiC,CAE5B,IAF4B,CAAb;AAAA,CAAvB;;IAIMC,Q;;;AAEJ,oBAAYC,KAAZ,EAAkB;AAAA;;AAChB,kCAAMA,KAAN;;AADgB,UAgCjBC,QAhCiB,GAgCN,UAACC,UAAD,EAAaC,MAAb,EAA2B;AAAA,UAAdA,MAAc;AAAdA,QAAAA,MAAc,GAAP,EAAO;AAAA;;AAAA,wBAI/B,MAAKH,KAJ0B;AAAA,UAEjCI,SAFiC,eAEjCA,SAFiC;AAAA,UAEtBC,UAFsB,eAEtBA,UAFsB;AAAA,UAEVC,YAFU,eAEVA,YAFU;AAAA,UAGjCC,EAHiC,eAGjCA,EAHiC;;AAMnC,UAAIJ,MAAM,CAACI,EAAP,KAAcA,EAAlB,EAAqB;AACnB,gBAAOL,UAAP;AACE,eAAKE,SAAL;AAAgB;AACd,oBAAKI,QAAL,CAAc;AACZC,gBAAAA,MAAM,EAAE,IADI;AAEZC,gBAAAA,QAAQ,EAAEP,MAAM,CAACQ,IAFL;AAGZC,gBAAAA,MAAM,EAAET,MAAM,CAACS,MAAP,IAAiB,MAAKC,KAAL,CAAWD;AAHxB,eAAd;;AAKA;AACA;;AACF,eAAKP,UAAL;AACE,kBAAKG,QAAL,CAAc;AAAEC,cAAAA,MAAM,EAAE;AAAV,aAAd;;AACA;;AACF,eAAKH,YAAL;AACE,kBAAKE,QAAL,CAAc,UAAAM,SAAS;AAAA,qBAAK;AAC1BL,gBAAAA,MAAM,EAAE,CAACK,SAAS,CAACL;AADO,eAAL;AAAA,aAAvB;;AAGA;;AACF;AAAS,mBAAO,KAAK,CAAZ;AAjBX;AAmBD;AACH,KA3DgB;;AAAA,UA6DjBM,SA7DiB,GA6DL,YAAM;AACf,YAAKP,QAAL,CAAc;AAAEQ,QAAAA,MAAM,EAAE;AAAV,OAAd;AACF,KA/DgB;;AAAA,UAgEjBC,YAhEiB,GAgEF,YAAM;AACnB,YAAKT,QAAL,CAAc,UAAAM,SAAS;AAAA,eAAK;AAC1BE,UAAAA,MAAM,EAAE,CAACF,SAAS,CAACE;AADO,SAAL;AAAA,OAAvB;AAGD,KApEgB;;AAAA,UAsEjBE,iBAtEiB,GAsEG,YAAM;AAAA;AAAA,UAChBC,OADgB,yBAChBA,OADgB;AAAA,iBAEPA,OAAO,IAAI,EAFJ;AAAA,4BAEpBlC,KAFoB;AAAA,UAEpBA,KAFoB,2BAEd,EAFc;;AAGxB,aAAOA,KAAP;AACD,KA1EgB;;AAAA,UA4EjBmC,SA5EiB,GA4EL,UAACjC,KAAD,EAAW;AACrB,YAAK+B,iBAAL,GAAyB/B,KAAzB,GAAiCC,aAAa,CAACD,KAAD,CAA9C;AACD,KA9EgB;;AAAA,UAgFjBkC,YAhFiB,GAgFF,YAAM;AACnB,UAAMpC,KAAK,GAAG,MAAKiC,iBAAL,EAAd;AAAA,UACMI,CAAC,GAAGtC,SAAS,CAACC,KAAD,CAAT,GAAmBnB,YAD7B;;AAEA,UAAIwD,CAAC,GAAGzD,gBAAR,EAA0B;AACvBoB,QAAAA,KAAK,CAACE,KAAN,GAAcC,aAAa,CAACkC,CAAD,CAA3B;AACF;AACF,KAtFgB;;AAAA,UAuFjBC,aAvFiB,GAuFD,YAAM;AACpB,UAAMtC,KAAK,GAAG,MAAKiC,iBAAL,EAAd;AAAA,UACMI,CAAC,GAAGtC,SAAS,CAACC,KAAD,CAAT,GAAmBnB,YAD7B;;AAEA,UAAIwD,CAAC,GAAG1D,gBAAR,EAA0B;AACxBqB,QAAAA,KAAK,CAACE,KAAN,GAAcC,aAAa,CAACkC,CAAD,CAA3B;AACD;AACF,KA7FgB;;AAAA,UA+FjBE,MA/FiB,GA+FR,YAAM;AAAA,UACJC,OADI,GACQ,MAAKzB,KADb,CACJyB,OADI;AAEZA,MAAAA,OAAO;;AACP,YAAKjB,QAAL,CAAc;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAd;AACF,KAnGgB;;AAAA,UAkHlBiB,WAlHkB,GAkHJ,UAAAC,IAAI;AAAA,aAAI,MAAKR,OAAL,GAAeQ,IAAnB;AAAA,KAlHA;;AAAA,UA2KjBC,WA3KiB,GA2KH,YAAM;AAClB,aAAO,MAAKT,OAAZ;AACD,KA7KgB;;AAGhB,UAAKU,aAAL,gBAAqB,uBAArB;AACA,UAAKC,WAAL,GAAmBpE,YAAnB;AACA,UAAKqE,WAAL,GAAmBC,gBAAIC,cAAJ,EAAnB;AAEA,UAAKC,MAAL,GAAc,6BAAY;AACxBC,MAAAA,UAAU,EAAE,MAAKf,SAAL,CAAegB,IAAf,iDAA0BxE,gBAA1B,CADY;AAExByE,MAAAA,WAAW,EAAE,MAAKjB,SAAL,CAAegB,IAAf,iDAA0BzE,iBAA1B,CAFW;AAGxB2E,MAAAA,WAAW,EAAE,MAAKjB,YAHM;AAIxBkB,MAAAA,YAAY,EAAE,MAAKhB,aAJK;AAKxBiB,MAAAA,aAAa,EAAExC,KAAK,CAACwC;AALG,KAAZ,CAAd;AAQA,UAAK3B,KAAL,GAAa;AACXJ,MAAAA,MAAM,EAAE,IADG;AAEXO,MAAAA,MAAM,EAAE,KAFG;AAGXN,MAAAA,QAAQ,EAAE,EAHC;AAIXE,MAAAA,MAAM,EAAE;AAJG,KAAb;AAfgB;AAqBjB;;;;SAED6B,iB,GAAA,6BAAmB;AAAA,QACTC,KADS,GACC,KAAK1C,KADN,CACT0C,KADS;AAEjB,SAAKC,WAAL,GAAmBD,KAAK,CAACE,MAAN,CAAa,KAAK3C,QAAlB,CAAnB;;AACAZ,IAAAA,eAAe,CAAC,KAAKwC,aAAN,CAAf;AACD,G;;SACDgB,oB,GAAA,gCAAsB;AACpB,SAAKF,WAAL;AACD,G;;SAuEDG,e,GAAA,yBAAgBpC,QAAhB,EAA6BqC,WAA7B,EAA0CC,aAA1C,EAAwD;AAAA;;AAAA,QAAxCtC,QAAwC;AAAxCA,MAAAA,QAAwC,GAA/B,EAA+B;AAAA;;AAAA,QAC7CuC,IAD6C,GACpC,KAAKjD,KAD+B,CAC7CiD,IAD6C;AAErD,WAAOvC,QAAQ,CAACwC,GAAT,CAAa,UAACC,OAAD,EAAUC,KAAV;AAAA,0BACjB,qBAAC,IAAD;AACE,QAAA,GAAG,EAAEA,KAAK,KAAK,CAAV,GAAc,MAAI,CAACvB,aAAnB,GAAmC,KAAK,CAD/C;AAGE,QAAA,IAAI,EAAEsB,OAHR;AAIE,QAAA,WAAW,EAAEJ,WAJf;AAKE,QAAA,aAAa,EAAEC;AALjB,SAEOG,OAAO,CAACE,SAFf,CADiB;AAAA,KAAb,CAAP;AASF,G;;SAIAC,M,GAAA,kBAAQ;AAAA,uBAMC,KAAKtD,KANN;AAAA,QAEDuD,WAFC,gBAEDA,WAFC;AAAA,QAGDC,KAHC,gBAGDA,KAHC;AAAA,QAIDhB,aAJC,gBAIDA,aAJC;AAAA,QAKDQ,aALC,gBAKDA,aALC;AAAA,QAKcD,WALd,gBAKcA,WALd;AAAA,QAOHU,EAPG,GAOED,KAAK,CAACE,WAAN,CAAkBC,oBAAlB,CAPF;AAAA,sBAQoC,KAAK9C,KARzC;AAAA,QAQDJ,MARC,eAQDA,MARC;AAAA,QAQOO,MARP,eAQOA,MARP;AAAA,QAQeN,QARf,eAQeA,QARf;AAAA,QAQyBE,MARzB,eAQyBA,MARzB;AAAA,QASHgD,YATG,GASYlE,cAAc,CAAC6D,WAAD,EAAc3C,MAAd,CAT1B;AAAA,QAUHiD,UAVG,GAUU,sBAAK9F,EAAE,CAACC,SAAR,EAAmB,CAACyC,MAAD,EAAU1C,EAAE,CAACE,UAAb,CAAnB,CAVV;AAAA,QAWH6F,YAXG,GAWYrD,MAAM,GAAGtC,CAAC,CAACU,YAAL,GAAoBV,CAAC,CAACY,IAXxC;;AAaN,wBACG;AACG,MAAA,GAAG,EAAE,KAAK2C,WADb;AAEG,MAAA,SAAS,EAAEmC,UAFd;AAGG,MAAA,KAAK,gCACA,KAAK9B,WADL,EAEA0B,EAAE,CAACM,SAFH,EAGAD,YAHA,CAHR;AAAA,8BASE,qBAAC,gBAAD,CAAG,WAAH;AACE,QAAA,MAAM,EAAE9C,MADV;AAEE,QAAA,SAAS,EAAEjD,EAAE,CAACG,SAFhB;AAGE,QAAA,KAAK,EAAEuF,EAAE,CAACO,SAHZ;AAIE,QAAA,KAAK,EAAE,KAAK9B,MAJd;AAKE,QAAA,OAAO,EAAE,KAAKjB;AALhB,QATF,eAgBE,sBAAC,gBAAD,CAAG,cAAH;AACG,QAAA,SAAS,EAAEwC,EAAE,CAACQ,YADjB;AAEG,QAAA,OAAO,EAAEL,YAFZ;AAGG,QAAA,MAAM,EAAE,KAAK7C,SAHhB;AAIG,QAAA,OAAO,EAAE,KAAKS,MAJjB;AAAA,gCAME,qBAAC,gBAAD,CAAG,YAAH;AACE,UAAA,OAAO,EAAC,GADV;AAEE,UAAA,KAAK,EAAC,kBAFR;AAGE,UAAA,KAAK,EAAErD,CAAC,CAACC,SAHX;AAIE,UAAA,OAAO,EAAEoE;AAJX,UANF,eAYE,qBAAC,gBAAD,CAAG,YAAH;AACE,UAAA,QAAQ,EAAE5E,gBADZ;AAEE,UAAA,QAAQ,EAAEC,gBAFZ;AAGE,UAAA,UAAU,EAAE,KAAK+D;AAHnB,UAZF;AAAA,QAhBF,eAkCE,qBAAC,gBAAD,CAAG,UAAH;AAAc,QAAA,SAAS,EAAE6B,EAAE,CAACS,cAA5B;AAA4C,QAAA,KAAK,EAAE/F,CAAC,CAACM,UAArD;AAAA,kBACM,KAAKqE,eAAL,CAAqBpC,QAArB,EAA+BqC,WAA/B,EAA4CC,aAA5C;AADN,QAlCF;AAAA,MADH;AAwCD,G;;;EA3KmBmB,gB;;eAkLR,2BAAUpE,QAAV,C","sourcesContent":["import { Component, createRef } from 'react'\r\n\r\nimport withTheme from '../hoc/withTheme'\r\nimport crCn from '../zhn-utils/crCn'\r\nimport styleConfig from './NewsPane.Style'\r\nimport has from '../has'\r\n\r\nimport crModelMore from './crModelMore'\r\nimport A from '../Comp'\r\n\r\nconst CHILD_MARGIN = 36\r\n, RESIZE_INIT_WIDTH = 635\r\n, RESIZE_MIN_WIDTH = 395\r\n, RESIZE_MAX_WIDTH = 1200\r\n, RESIZE_DELTA = 10\r\n, CL = {\r\n  NEWS_PANE: \"news-pane\",\r\n  SHOW_POPUP: \"show-popup\",\r\n  MENU_MORE: \"popup-menu items__menu-more\"\r\n};\r\n\r\nconst S = {\r\n  BT_REMOVE: {\r\n    position: 'relative',\r\n    top: -3,\r\n    marginLeft: 16,\r\n    marginRight: 6\r\n  },\r\n  SCROLL_DIV : {\r\n    overflowY: 'auto',\r\n    height: '92%',\r\n    paddingRight: 10\r\n  },\r\n  INLINE_BLOCK : {\r\n    display : 'inline-block'\r\n  },\r\n  NONE : {\r\n    display: 'none'\r\n  }\r\n};\r\n\r\nconst _getWidth = style => parseInt(style.width, 10)\r\n  || RESIZE_INIT_WIDTH;\r\nconst _toStyleWidth = width => width + 'px';\r\n\r\nconst _focusFirstItem = ref => {\r\n  setTimeout( () => {\r\n    if (ref && ref.current && ref.current.focus) {\r\n      ref.current.focus()\r\n    }\r\n  }, 1000)\r\n};\r\n\r\nconst _crPaneCaption = (...args) => args\r\n  .filter(Boolean)\r\n  .join(': ');\r\n\r\nclass NewsPane extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this._refFirstItem = createRef()\r\n    this.childMargin = CHILD_MARGIN;\r\n    this._widthStyle = has.initWidthStyle()\r\n\r\n    this._MODEL = crModelMore({\r\n      onMinWidth: this._resizeTo.bind(this, RESIZE_MIN_WIDTH),\r\n      onInitWidth: this._resizeTo.bind(this, RESIZE_INIT_WIDTH),\r\n      onPlusWidth: this._plusToWidth,\r\n      onMinusWidth: this._minusToWidth,\r\n      onRemoveItems: props.onRemoveItems\r\n    })\r\n\r\n    this.state = {\r\n      isShow: true,\r\n      isMore: false,\r\n      articles: [],\r\n      sortBy: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount(){\r\n    const { store } = this.props;\r\n    this.unsubscribe = store.listen(this._onStore)\r\n    _focusFirstItem(this._refFirstItem)\r\n  }\r\n  componentWillUnmount(){\r\n    this.unsubscribe()\r\n  }\r\n\r\n   _onStore = (actionType, option={}) => {\r\n      const {\r\n        addAction, showAction, toggleAction,\r\n        id\r\n      } = this.props;\r\n\r\n      if (option.id === id){\r\n        switch(actionType){\r\n          case addAction: {\r\n            this.setState({\r\n              isShow: true,\r\n              articles: option.data,\r\n              sortBy: option.sortBy || this.state.sortBy\r\n            })\r\n            break;\r\n           }\r\n          case showAction:\r\n            this.setState({ isShow: true })\r\n            break;\r\n          case toggleAction:\r\n            this.setState(prevState => ({\r\n              isShow: !prevState.isShow\r\n            }))\r\n            break;\r\n          default: return void 0;\r\n        }\r\n      }\r\n   }\r\n\r\n   _showMore = () => {\r\n      this.setState({ isMore: true })\r\n   }\r\n   _hToggleMore = () => {\r\n     this.setState(prevState => ({\r\n       isMore: !prevState.isMore\r\n     }))\r\n   }\r\n\r\n   _getRootNodeStyle = () => {\r\n     const { rootDiv } = this\r\n     , { style={} } = rootDiv || {};\r\n     return style;\r\n   }\r\n\r\n   _resizeTo = (width) => {\r\n     this._getRootNodeStyle().width = _toStyleWidth(width);\r\n   }\r\n\r\n   _plusToWidth = () => {\r\n     const style = this._getRootNodeStyle()\r\n         , w = _getWidth(style) + RESIZE_DELTA;\r\n     if (w < RESIZE_MAX_WIDTH) {\r\n        style.width = _toStyleWidth(w)\r\n     }\r\n   }\r\n   _minusToWidth = () => {\r\n     const style = this._getRootNodeStyle()\r\n         , w = _getWidth(style) - RESIZE_DELTA;\r\n     if (w > RESIZE_MIN_WIDTH) {\r\n       style.width = _toStyleWidth(w)\r\n     }\r\n   }\r\n\r\n   _hHide = () => {\r\n      const { onClose } = this.props;\r\n      onClose()\r\n      this.setState({ isShow: false })\r\n   }\r\n\r\n  _renderArticles(articles=[], onCloseItem, onRemoveUnder){\r\n     const { Item } = this.props;\r\n     return articles.map((article, index) => (\r\n        <Item\r\n          ref={index === 0 ? this._refFirstItem : void 0}\r\n          key={article.articleId}\r\n          item={article}\r\n          onCloseItem={onCloseItem}\r\n          onRemoveUnder={onRemoveUnder}\r\n        />\r\n     ));\r\n  }\r\n\r\n  _refRootDiv = node => this.rootDiv = node\r\n\r\n   render(){\r\n      const {\r\n          paneCaption,\r\n          theme,\r\n          onRemoveItems,\r\n          onRemoveUnder, onCloseItem\r\n        } = this.props\r\n      , TS = theme.createStyle(styleConfig)\r\n      , { isShow, isMore, articles, sortBy } = this.state\r\n      , _paneCaption = _crPaneCaption(paneCaption, sortBy)\r\n      , _className = crCn(CL.NEWS_PANE, [isShow,  CL.SHOW_POPUP])\r\n      , _styleIsShow = isShow ? S.INLINE_BLOCK : S.NONE;\r\n\r\n     return(\r\n        <div\r\n           ref={this._refRootDiv}\r\n           className={_className}\r\n           style={{\r\n             ...this._widthStyle,\r\n             ...TS.PANE_ROOT,\r\n             ..._styleIsShow\r\n           }}\r\n        >\r\n          <A.ModalSlider\r\n            isShow={isMore}\r\n            className={CL.MENU_MORE}\r\n            style={TS.EL_BORDER}\r\n            model={this._MODEL}\r\n            onClose={this._hToggleMore}\r\n          />\r\n          <A.BrowserCaption\r\n             rootStyle={TS.PANE_CAPTION}\r\n             caption={_paneCaption}\r\n             onMore={this._showMore}\r\n             onClose={this._hHide}\r\n          >\r\n            <A.CircleButton\r\n              caption=\"R\"\r\n              title=\"Remove All Items\"\r\n              style={S.BT_REMOVE}\r\n              onClick={onRemoveItems}\r\n            />\r\n            <A.SvgHrzResize\r\n              minWidth={RESIZE_MIN_WIDTH}\r\n              maxWidth={RESIZE_MAX_WIDTH}\r\n              getDomNode={this._getRootDiv}\r\n            />\r\n          </A.BrowserCaption>\r\n          <A.ScrollPane className={TS.CL_SCROLL_PANE} style={S.SCROLL_DIV}>\r\n              { this._renderArticles(articles, onCloseItem, onRemoveUnder) }\r\n          </A.ScrollPane>\r\n        </div>\r\n     )\r\n   }\r\n\r\n   _getRootDiv = () => {\r\n     return this.rootDiv;\r\n   }\r\n}\r\n\r\nexport default withTheme(NewsPane)\r\n"],"file":"NewsPane.js"}